@(date1: String, date2: String, 
    data    : java.util.List[models.zcreport.ReportDetailsEntry],
    dateList: java.util.List[String],
    sumList : java.util.List[Double]
)(implicit lang: Lang)
@import com.github.ddth.plommon.utils._
@import play.mvc._
@import vngup.rtreports.common._
@_layout(
	active   = "report-details",
	customJs = Array(
	    "avant-1.2.1/assets/plugins/form-datepicker/js/bootstrap-datepicker.js"
	)
){
<div id="page-heading">
    <ol class="breadcrumb">
        <li><a href="@controllers.zcreport.routes.ModuleController.dashboard()">@Messages("msg.dashboard")</a></li>
        <li class="active">@Messages("msg.report_details")</li>
    </ol>
</div>

<div class="container">
    <div class="row">
        <div class="col-md-12">
            @_macro_displayPageFlashMessage(Controller.flash(controllers.zcreport.ModuleController.VIEW_REPORT_DETAILS))
        </div>
    </div>
        
    <div class="row">
        <div class="col-md-12">
	        <div class="panel panel-info">
		        <div class="panel-heading"><h3 class="panel-title">@Messages("msg.report_details")</h3></div>
		        <div class="panel-body">
		            <div class="container">
			            <form class="form-horizontal row-border" role="form" method="get">
			                <div class="form-group">
	                            <div class="col-sm-5">
	                                <div class="input-group date" id="datepicker1">
	                                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
	                                    <input type="text" class="form-control" id="date1" name="date1" value="@date1" />
	                                </div>
	                            </div>
	                            <div class="col-sm-5">
	                                <div class="input-group date" id="datepicker2">
	                                    <span class="input-group-addon"><i class="fa fa-calendar"></i></span>
	                                    <input type="text" class="form-control" id="date2" name="date2" value="@date2" />
	                                </div>
	                            </div>
	                            <div class="col-sm-2">
	                                <button type="submit" class="btn btn-primary">@Messages("msg.report")</button>
	                            </div>
	                        </div>
			            </form>
			        </div>
		            
		            <div class="container" style="margin-bottom: 10px;">
                        <a class="btn btn-info btn-sm" onclick="javascript:exportExcel('report_table', 'zc_reportdetails_@(date1)_@(date2).xls');" id="exportExcel"><i class="fa fa-file-excel-o"></i>&nbsp; Export Excel</a>
                    </div>
		            
		            <div class="container table-responsive">
                        <table class="table table-striped table-bordered table-condensed" id="report_table">
                            <thead>
                                <tr>
                                    <th style="text-align:center; white-space:nowrap;" nowrap="nowrap">@Messages("msg.app")</th>
                                    @for(date <- dateList){
                                        <th style="text-align: center">@date</th>
                                    }
                                </tr>
                            </thead>
                            <tbody>
                                @for(row <- data){
                                    <tr @if(row.error){class="danger"}>
                                        <td style="text-align: center">@row.appId</td>
                                        @for(date <- dateList){
                                            <td style="text-align: right">@defining(row.getValue(date)){value =>
                                                @if(value!=null){@("%.2f".format(value))}}</td>
                                        }
                                    </tr>
                                }
                            </tbody>
                            <tfoot>
                                <tr>
                                    <th style="text-align:center; white-space:nowrap;" nowrap="nowrap">@Messages("msg.sum_total")</th>
                                    @for(sum <- sumList){
                                        <th style="text-align: right">@("%.2f".format(sum))</th>
                                    }
                                </tr>
                            </tfoot>
                        </table>
                    </div>
		        </div>
		    </div>
        </div>
    </div>
</div>

<script type="text/javascript">
$(document).ready(function(){
    var now = new Date();
    $('#date1,#date2').datepicker({
        format:  'yyyy-mm-dd',
        endDate: 'today' /* can not select date in future */
    });
});
</script>   
}
